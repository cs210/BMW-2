{"version":3,"sources":["../../src/common/Ship.js"],"names":["game","p2","Ship","gameEngine","physicsEngine","shape","Convex","vertices","shipSize","radius","collisionGroup","SHIP","collisionMask","ASTEROID","FINISHLINE","physicsObj","Body","mass","position","x","y","angle","damping","angularDamping","addShape","world","addBody","removeBody","score","other","won","c_name","v_name","max","angularVelocity","percent","angleLocal","Object","assign","type","BaseTypes","TYPES","INT8","STRING","PhysicalObject2D"],"mappings":";;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAIA,IAAI,GAAG,IAAX;AACA,IAAIC,EAAE,GAAG,IAAT;;IAEqBC,I;;;;;;;;;;;;;iCAqBJC,U,EAAY;AACrBH,MAAAA,IAAI,GAAGG,UAAP;AACAF,MAAAA,EAAE,GAAGE,UAAU,CAACC,aAAX,CAAyBH,EAA9B,CAFqB,CAIrB;;AACA,UAAII,KAAK,GAAG,KAAKA,KAAL,GAAa,IAAIJ,EAAE,CAACK,MAAP,CAAc;AACnCC,QAAAA,QAAQ,EAAE,CAAC,CAAC,CAACP,IAAI,CAACQ,QAAN,GAAe,GAAhB,EAAqBR,IAAI,CAACQ,QAA1B,CAAD,EAAsC,CAAC,CAAD,EAAI,CAACR,IAAI,CAACQ,QAAV,CAAtC,EAA2D,CAACR,IAAI,CAACQ,QAAL,GAAc,GAAf,EAAoBR,IAAI,CAACQ,QAAzB,CAA3D,CADyB;AAEnCC,QAAAA,MAAM,EAAET,IAAI,CAACQ,QAFsB;AAGnCE,QAAAA,cAAc,EAAEV,IAAI,CAACW,IAHc;AAGR;AAC3BC,QAAAA,aAAa,EAAEZ,IAAI,CAACa,QAAL,GAAgBb,IAAI,CAACc,UAJD,CAIY;;AAJZ,OAAd,CAAzB;AAMA,WAAKC,UAAL,GAAkB,IAAId,EAAE,CAACe,IAAP,CAAY;AAC1BC,QAAAA,IAAI,EAAE,CADoB;AAE1BC,QAAAA,QAAQ,EAAE,CAAC,KAAKA,QAAL,CAAcC,CAAf,EAAkB,KAAKD,QAAL,CAAcE,CAAhC,CAFgB;AAG1BC,QAAAA,KAAK,EAAE,KAAKA,KAHc;AAI1BC,QAAAA,OAAO,EAAE,EAJiB;AAK1BC,QAAAA,cAAc,EAAE;AALU,OAAZ,CAAlB;AAOA,WAAKR,UAAL,CAAgBS,QAAhB,CAAyBnB,KAAzB;AACAF,MAAAA,UAAU,CAACC,aAAX,CAAyBqB,KAAzB,CAA+BC,OAA/B,CAAuC,KAAKX,UAA5C;AACH;;;sCAEiBZ,U,EAAY;AAC1BH,MAAAA,IAAI,CAACI,aAAL,CAAmBqB,KAAnB,CAAyBE,UAAzB,CAAoC,KAAKZ,UAAzC;AACH;;;+BAEU;AACP,mHAA0C,KAAKa,KAA/C;AACH;;;2BAEMC,K,EAAO;AACV,uEAAaA,KAAb;;AACA,WAAKD,KAAL,GAAaC,KAAK,CAACD,KAAnB;AACA,WAAKE,GAAL,GAAWD,KAAK,CAACC,GAAjB;AACA,WAAKC,MAAL,GAAcF,KAAK,CAACE,MAApB;AACA,WAAKC,MAAL,GAAcH,KAAK,CAACG,MAApB;AACH;;;AA9CD;AACA;wBACc;AACV,aAAO;AACHd,QAAAA,QAAQ,EAAE;AAAEe,UAAAA,GAAG,EAAE;AAAP,SADP;AAEHC,QAAAA,eAAe,EAAE;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAFd;AAGHC,QAAAA,UAAU,EAAE;AAAED,UAAAA,OAAO,EAAE;AAAX;AAHT,OAAP;AAKH;;;wBAjBsB;AACnB,aAAOE,MAAM,CAACC,MAAP,CAAc;AACjBV,QAAAA,KAAK,EAAE;AAAEW,UAAAA,IAAI,EAAEC,mBAAUC,KAAV,CAAgBC;AAAxB,SADU;AAEjBZ,QAAAA,GAAG,EAAE;AAAES,UAAAA,IAAI,EAAEC,mBAAUC,KAAV,CAAgBC;AAAxB,SAFY;AAGjBX,QAAAA,MAAM,EAAE;AAAEQ,UAAAA,IAAI,EAAEC,mBAAUC,KAAV,CAAgBE;AAAxB,SAHS;AAIjBX,QAAAA,MAAM,EAAE;AAAEO,UAAAA,IAAI,EAAEC,mBAAUC,KAAV,CAAgBE;AAAxB;AAJS,OAAd,iDAAP;AAMH;;;;EAT6BC,yB","sourcesContent":["import { PhysicalObject2D, BaseTypes } from 'lance-gg';\n\nlet game = null;\nlet p2 = null;\n\nexport default class Ship extends PhysicalObject2D {\n\n    static get netScheme() {\n        return Object.assign({\n            score: { type: BaseTypes.TYPES.INT8 },\n            won: { type: BaseTypes.TYPES.INT8 },\n            c_name: { type: BaseTypes.TYPES.STRING },\n            v_name: { type: BaseTypes.TYPES.STRING }\n        }, super.netScheme);\n    }\n\n    // no position bending if difference is larger than 4.0 (i.e. wrap beyond bounds),\n    // no angular velocity bending, no local angle bending\n    get bending() {\n        return {\n            position: { max: 4.0 },\n            angularVelocity: { percent: 0.0 },\n            angleLocal: { percent: 0.0 }\n        };\n    }\n\n    onAddToWorld(gameEngine) {\n        game = gameEngine;\n        p2 = gameEngine.physicsEngine.p2;\n\n        // Add ship physics\n        let shape = this.shape = new p2.Convex({\n            vertices: [[-game.shipSize*0.6, game.shipSize], [0, -game.shipSize], [game.shipSize*0.6, game.shipSize]],\n            radius: game.shipSize,\n            collisionGroup: game.SHIP, // Belongs to the SHIP group\n            collisionMask: game.ASTEROID | game.FINISHLINE // Only collide with the ASTEROID group\n        });\n        this.physicsObj = new p2.Body({\n            mass: 1,\n            position: [this.position.x, this.position.y],\n            angle: this.angle,\n            damping: .7,\n            angularDamping: .7\n        });\n        this.physicsObj.addShape(shape);\n        gameEngine.physicsEngine.world.addBody(this.physicsObj);\n    }\n\n    onRemoveFromWorld(gameEngine) {\n        game.physicsEngine.world.removeBody(this.physicsObj);\n    }\n\n    toString() {\n        return `Ship::${super.toString()} score=${this.score}`;\n    }\n\n    syncTo(other) {\n        super.syncTo(other);\n        this.score = other.score;\n        this.won = other.won;\n        this.c_name = other.c_name;\n        this.v_name = other.v_name;\n    }\n}\n"],"file":"Ship.js"}