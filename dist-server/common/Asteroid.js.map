{"version":3,"sources":["../../src/common/Asteroid.js"],"names":["game","p2","Asteroid","gameEngine","options","props","dim","console","log","physicsEngine","physicsObj","Body","mass","damping","angularDamping","position","x","y","velocity","addShape","Box","width","height","collisionGroup","ASTEROID","collisionMask","BULLET","SHIP","addAsteroidVerts","world","addBody","removeBody","verts","shapes","push","other","level","max","Object","assign","type","BaseTypes","TYPES","INT16","CLASSINSTANCE","PhysicalObject2D"],"mappings":"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","sourcesContent":["import { PhysicalObject2D, BaseTypes } from 'lance-gg';\r\n\r\nlet game = null;\r\nlet p2 = null;\r\n\r\nexport default class Asteroid extends PhysicalObject2D {\r\n\r\n    constructor(gameEngine, options, props, dim) {\r\n        super(gameEngine, options, props);\r\n        this.dim = dim;\r\n    }\r\n\r\n    static get netScheme() {\r\n        return Object.assign({\r\n            level: { type: BaseTypes.TYPES.INT16 },\r\n            dim: { type: BaseTypes.TYPES.CLASSINSTANCE }\r\n        }, super.netScheme);\r\n    }\r\n\r\n    // position bending: bend fully to server position in each sync [percent=1.0],\r\n    // unless the position difference is larger than 4.0 (i.e. wrap beyond bounds)\r\n    get bending() {\r\n        return { position: { max: 4.0 } };\r\n    }\r\n\r\n    // on add-to-world, create a physics body\r\n    onAddToWorld() {\r\n        console.log(\"Variable dim that is passed thru: \");\r\n        console.log(this.dim);\r\n        game = this.gameEngine;\r\n        p2 = game.physicsEngine.p2;\r\n        this.physicsObj = new p2.Body({\r\n            mass: this.mass, damping: 0, angularDamping: 0,\r\n            position: [this.position.x, this.position.y],\r\n            velocity: [this.velocity.x, this.velocity.y]\r\n        });\r\n        this.physicsObj.addShape(new p2.Box({\r\n            width: this.dim.x,\r\n            height: this.dim.y,\r\n            collisionGroup: game.ASTEROID, // Belongs to the ASTEROID group\r\n            collisionMask: game.BULLET | game.SHIP // Can collide with the BULLET or SHIP group\r\n        }));\r\n        this.addAsteroidVerts();\r\n        game.physicsEngine.world.addBody(this.physicsObj);\r\n    }\r\n\r\n    // on remove-from-world, remove the physics body\r\n    onRemoveFromWorld() {\r\n        game.physicsEngine.world.removeBody(this.physicsObj);\r\n    }\r\n\r\n    // Adds random .verts to an asteroid body\r\n    addAsteroidVerts() {\r\n        this.physicsObj.verts = [];\r\n        let width = this.physicsObj.shapes[0].width;\r\n        let height = this.physicsObj.shapes[0].height;\r\n        this.physicsObj.verts.push([-width/2, -height/2]);\r\n        this.physicsObj.verts.push([-width/2, height/2]);\r\n        this.physicsObj.verts.push([width/2, height/2]);\r\n        this.physicsObj.verts.push([width/2, -height/2]);\r\n    }\r\n\r\n    syncTo(other) {\r\n        super.syncTo(other);\r\n        this.dim = other.dim;\r\n    }\r\n\r\n    toString() {\r\n        return `Asteroid::${super.toString()} Level${this.level}`;\r\n    }\r\n}\r\n"],"file":"Asteroid.js"}